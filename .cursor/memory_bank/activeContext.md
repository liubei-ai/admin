# 活跃上下文

## 当前工作焦点

### 项目状态
- **阶段**: 项目重新定位和架构调整阶段
- **重点**: 从通用管理后台转向AI视频服务平台
- **优先级**: 核心AI工具集成 > 资产管理系统 > 用户体验优化

### 最近的重要变化

#### 项目重新定位 🎯
1. **项目方向调整**
   - 从通用管理后台模板转向AI视频服务平台
   - 专注于AI视频工具的整合和小工具集合
   - 采用独立聚合模式，不做功能耦合

2. **核心目标重新定义**
   - 账号统一：一个账号可以使用N个模型
   - 资产统一：脚本、创意、图片、视频、音乐等按项目管理
   - 模型可以逐步接入

#### 一期核心功能规划 🎯

1. **账号系统**
   - 简化账号体系（测试账号生成即可）
   - 统一账号管理，支持多模型使用
   - 基础的用户认证功能

2. **创意策划模块**
   - 集成AI文本生成模型：Deepseek、豆包、Kimi
   - 用户可选择不同模型生成创意文本
   - 创意内容的保存和管理

3. **图片生成模块**
   - 集成图片生成模型：即梦、豆包、通义万相
   - 核心功能：文字生图、参考图生图、比例尺寸设置
   - 界面参考即梦设计，增加模型选择功能

4. **视频生成模块**
   - 集成Vidu视频生成模型：Vidu 2.0、Vidu Q1
   - 核心功能：文生视频、图生视频、首尾帧、参考生视频
   - 设置项参考Vidu官方界面

5. **资产管理系统**
   - 项目化管理：脚本、创意文档、图片、视频、音乐
   - 资产分类和检索功能
   - 项目协作功能

#### 已有基础功能保留 ✅
- 主题系统（明暗主题切换、主题色切换）
- 国际化支持
- 响应式布局
- 基础的用户认证框架

## 当前技术决策

### 架构设计原则
1. **独立聚合原则**
   - 各AI工具模块独立开发，不做功能耦合
   - 统一的用户界面和交互体验
   - 模块化的API集成方式
   - 便于后续模型的接入和替换

2. **项目化管理**
   - 以项目为单位组织所有创作资源
   - 支持项目的创建、编辑、分享
   - 资产在项目内的关联和引用
   - 项目模板和快速创建功能

### AI模型集成策略
1. **文本生成模型**
   - Deepseek API集成
   - 豆包API集成
   - Kimi API集成
   - 统一的文本生成接口抽象

2. **图片生成模型**
   - 即梦API集成
   - 豆包图片生成API
   - 通义万相API集成
   - 统一的图片生成参数配置

3. **视频生成模型**
   - Vidu 2.0 API集成
   - Vidu Q1 API集成
   - 视频生成参数统一管理
   - 生成进度和状态跟踪

### 重要的技术约束
- **浏览器支持**: 现代浏览器优先
- **性能要求**: AI模型响应时间 < 30秒
- **文件处理**: 支持大文件上传和处理
- **TypeScript**: 强制类型安全
- **模块化**: 各AI工具模块独立，便于扩展

## 开发模式和偏好

### 代码风格偏好
- **组合式API**: 优先使用`<script setup>`语法
- **类型安全**: 所有组件和函数都要有类型定义
- **模块化**: AI工具按模块划分，避免功能耦合
- **可扩展性**: 新模型接入要简单快速

### 组件设计原则
1. **模块独立**: 每个AI工具模块独立开发和维护
2. **接口统一**: 相同类型的AI工具使用统一的接口规范
3. **配置驱动**: 通过配置文件管理模型参数和设置
4. **响应式**: 所有组件都要支持响应式设计

### 状态管理策略
- **模块化状态**: 每个AI工具模块有独立的状态管理
- **项目状态**: 项目和资产管理的全局状态
- **用户状态**: 用户信息和偏好设置
- **持久化**: 重要的创作数据和用户偏好持久化存储

## 当前挑战和解决方案

### 技术挑战
1. **多AI模型集成**
   - **问题**: 不同AI模型API接口差异大
   - **解决方案**: 设计统一的抽象层，封装各模型差异
   - **状态**: 架构设计中

2. **大文件处理**
   - **问题**: 视频文件上传和处理性能
   - **解决方案**: 分片上传、进度跟踪、后台处理
   - **状态**: 技术调研中

3. **资产管理复杂度**
   - **问题**: 项目化管理的数据结构设计
   - **解决方案**: 设计灵活的资产关联模型
   - **状态**: 数据模型设计中

### 业务挑战
1. **用户体验统一**
   - **问题**: 不同AI工具的交互模式差异
   - **解决方案**: 设计统一的UI/UX规范
   - **状态**: 设计规范制定中

2. **模型选择策略**
   - **问题**: 用户如何选择最适合的模型
   - **解决方案**: 提供模型推荐和对比功能
   - **状态**: 产品设计中

## 即将进行的工作

### 短期计划（2-4周）
1. **架构设计完善**
   - AI模型抽象层设计
   - 项目和资产数据模型设计
   - API接口规范定义

2. **核心模块开发**
   - 创意策划模块基础框架
   - 图片生成模块基础框架
   - 视频生成模块基础框架

3. **基础设施搭建**
   - 项目管理系统
   - 资产存储和管理
   - 用户权限系统

### 中期计划（1-2个月）
1. **AI模型集成**
   - Deepseek、豆包、Kimi文本模型集成
   - 即梦、豆包、通义万相图片模型集成
   - Vidu视频模型集成

2. **功能完善**
   - 完整的创作流程实现
   - 资产管理功能完善
   - 用户体验优化

3. **测试和优化**
   - 功能测试和性能优化
   - 用户体验测试
   - 系统稳定性测试

## 学习和洞察

### 技术洞察
1. **AI模型集成**: 需要设计灵活的抽象层来处理不同模型的差异
2. **资产管理**: 项目化管理需要考虑资产的版本控制和关联关系
3. **用户体验**: 统一的交互模式对用户学习成本很重要

### 产品洞察
1. **工具整合价值**: 用户确实需要统一的AI工具平台
2. **项目化管理**: 按项目组织资产符合用户的工作习惯
3. **模型选择**: 提供多种模型选择能满足不同场景需求

### 开发流程洞察
1. **模块化开发**: 独立模块开发能提高开发效率
2. **接口标准化**: 统一的接口规范对团队协作很重要
3. **渐进式集成**: 逐步接入模型能降低开发风险

## 待决定的问题

### 技术选择
1. **文件存储方案**
   - 本地存储 vs 云存储
   - 文件版本管理策略
   - 大文件处理方案

2. **AI模型调用策略**
   - 直接调用 vs 代理调用
   - API密钥管理方式
   - 调用频率限制处理

### 功能规划
1. **协作功能范围**
   - 项目共享机制
   - 权限管理粒度
   - 实时协作需求

2. **扩展性设计**
   - 新模型接入流程
   - 插件系统需求
   - 第三方集成能力

## 重要提醒

### 开发注意事项
- 所有AI工具模块都要考虑独立性和可扩展性
- 新增的AI模型集成需要评估稳定性和成本
- 重要的创作数据需要可靠的备份和恢复机制
- 用户隐私和数据安全是重要考虑因素

### 项目转型注意事项
- 保留现有的基础架构和通用功能
- 逐步移除不相关的管理后台功能
- 重新设计导航和页面结构
- 更新项目文档和说明